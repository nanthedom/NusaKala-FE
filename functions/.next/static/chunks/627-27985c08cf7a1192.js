"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{285:(e,r,t)=>{t.d(r,{$:()=>c});var o=t(5155);t(2115);var a=t(9708),s=t(2085),n=t(9434);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:r,variant:t,size:s,asChild:c=!1,...l}=e,d=c?a.DX:"button";return(0,o.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:s,className:r})),...l})}},1264:(e,r,t)=>{t.d(r,{A:()=>o});let o=(0,t(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},2523:(e,r,t)=>{t.d(r,{p:()=>s});var o=t(5155);t(2115);var a=t(9434);function s(e){let{className:r,type:t,...s}=e;return(0,o.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}},4917:(e,r,t)=>{t.d(r,{y:()=>l});var o=t(5077),a=t(3464);let s="https://nusakala-be-production.up.railway.app/api",n=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),i=a.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let r=localStorage.getItem("refreshToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e));class c{async register(e){try{return(await n.post("/auth/register",e)).data}catch(e){if(console.error("Registration error details:",e),a.A.isAxiosError(e)){var r,t,o,s;if(console.error("Response data:",null==(r=e.response)?void 0:r.data),console.error("Response status:",null==(t=e.response)?void 0:t.status),console.error("Response headers:",null==(o=e.response)?void 0:o.headers),null==(s=e.response)?void 0:s.data)throw Error(e.response.data.error||e.response.data.message||"Registration failed")}throw Error("Network error occurred")}}async login(e){try{return(await n.post("/auth/login",e)).data}catch(e){if(a.A.isAxiosError(e)){var r;if(null==(r=e.response)?void 0:r.data)throw Error(e.response.data.error||"Login failed")}throw Error("Network error occurred")}}async logout(){try{return(await o.A.post("/auth/logout")).data}catch(r){if(a.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Logout failed")}throw Error("Network error occurred")}}async refreshToken(){try{return(await i.post("/auth/refresh")).data}catch(r){if(a.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Token refresh failed")}throw Error("Network error occurred")}}async getCurrentUser(){try{return(await o.A.get("/auth/me")).data}catch(r){if(a.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Failed to get user info")}throw Error("Network error occurred")}}}let l=new c},5057:(e,r,t)=>{t.d(r,{J:()=>n});var o=t(5155),a=t(2115),s=t(9434);let n=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,o.jsx)("label",{ref:r,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...n,children:a})});n.displayName="Label"},5077:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(3464),a=t(4917);let s=o.A.create({baseURL:"https://nusakala-be-production.up.railway.app/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});s.interceptors.request.use(e=>{{let r=localStorage.getItem("accessToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!t._retry){t._retry=!0;try{let e=await a.y.refreshToken();return localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken),s(t)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login",Promise.reject(e)}}return Promise.reject(e)});let n=s},6681:(e,r,t)=>{t.d(r,{A:()=>a});var o=t(9018);function a(){let{user:e,isAuthenticated:r,isLoading:t,error:a,login:s,register:n,logout:i,refreshUser:c,clearError:l}=(0,o.n)();return{user:e,isAuthenticated:r,isLoading:t,error:a,login:async(e,r)=>{try{await s(e,r),setTimeout(()=>{window.location.href="/nusa-discovery"},1e3)}catch(e){throw e}},register:async e=>{try{await n(e),setTimeout(()=>{window.location.href="/auth/login"},1e3)}catch(e){throw console.error("Registration error in useAuth:",e),e}},logout:async()=>{try{await i(),setTimeout(()=>{window.location.href="/"},500)}catch(e){console.error("Logout error:",e),setTimeout(()=>{window.location.href="/"},500)}},refreshUser:c,clearError:l}}},6695:(e,r,t)=>{t.d(r,{BT:()=>c,Wu:()=>l,ZB:()=>i,Zp:()=>s,aR:()=>n});var o=t(5155);t(2115);var a=t(9434);function s(e){let{className:r,...t}=e;return(0,o.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function n(e){let{className:r,...t}=e;return(0,o.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function i(e){let{className:r,...t}=e;return(0,o.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",r),...t})}function c(e){let{className:r,...t}=e;return(0,o.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",r),...t})}function l(e){let{className:r,...t}=e;return(0,o.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",r),...t})}},9018:(e,r,t)=>{t.d(r,{n:()=>n});var o=t(5453),a=t(6786),s=t(4917);let n=(0,o.v)()((0,a.Zr)((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null,login:async(r,t)=>{e({isLoading:!0,error:null});try{let o=await s.y.login({email:r,password:t}),a={user:o.user,isAuthenticated:!0,isLoading:!1,error:null,accessToken:o.session.accessToken};e(a),localStorage.setItem("accessToken",o.session.accessToken),localStorage.setItem("refreshToken",o.session.refreshToken)}catch(r){throw e({isLoading:!1,error:r instanceof Error?r.message:"Login failed"}),r}},register:async r=>{e({isLoading:!0,error:null});try{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null})}catch(r){throw console.error("Auth store: Registration error:",r),e({isLoading:!1,error:r instanceof Error?r.message:"Registration failed"}),r}},logout:async()=>{e({isLoading:!0});try{await s.y.logout()}catch(e){}finally{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},refreshUser:async()=>{if(r().isAuthenticated)try{let r={user:(await s.y.getCurrentUser()).user,isAuthenticated:!0,error:null};e(r)}catch(r){e({user:null,isAuthenticated:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},clearError:()=>{e({error:null})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,accessToken:e.accessToken})}))},9434:(e,r,t)=>{t.d(r,{cn:()=>s});var o=t(2596),a=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,o.$)(r))}}}]);