"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[732],{285:(e,r,a)=>{a.d(r,{$:()=>l});var s=a(5155);a(2115);var t=a(9708),o=a(2085),n=a(9434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:a,size:o,asChild:l=!1,...c}=e,d=l?t.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:a,size:o,className:r})),...c})}},1007:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4355:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(9946).A)("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},4917:(e,r,a)=>{a.d(r,{y:()=>c});var s=a(5077),t=a(3464);let o="https://nusakala-be-production.up.railway.app/api",n=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),i=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let r=localStorage.getItem("refreshToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e));class l{async register(e){try{return(await n.post("/auth/register",e)).data}catch(e){if(console.error("Registration error details:",e),t.A.isAxiosError(e)){var r,a,s,o;if(console.error("Response data:",null==(r=e.response)?void 0:r.data),console.error("Response status:",null==(a=e.response)?void 0:a.status),console.error("Response headers:",null==(s=e.response)?void 0:s.headers),null==(o=e.response)?void 0:o.data)throw Error(e.response.data.error||e.response.data.message||"Registration failed")}throw Error("Network error occurred")}}async login(e){try{return(await n.post("/auth/login",e)).data}catch(e){if(t.A.isAxiosError(e)){var r;if(null==(r=e.response)?void 0:r.data)throw Error(e.response.data.error||"Login failed")}throw Error("Network error occurred")}}async logout(){try{return(await s.A.post("/auth/logout")).data}catch(r){if(t.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Logout failed")}throw Error("Network error occurred")}}async refreshToken(){try{return(await i.post("/auth/refresh")).data}catch(r){if(t.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Token refresh failed")}throw Error("Network error occurred")}}async getCurrentUser(){try{return(await s.A.get("/auth/me")).data}catch(r){if(t.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Failed to get user info")}throw Error("Network error occurred")}}}let c=new l},5077:(e,r,a)=>{a.d(r,{A:()=>n});var s=a(3464),t=a(4917);let o=s.A.create({baseURL:"https://nusakala-be-production.up.railway.app/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});o.interceptors.request.use(e=>{{let r=localStorage.getItem("accessToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var r;let a=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!a._retry){a._retry=!0;try{let e=await t.y.refreshToken();return localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken),o(a)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login",Promise.reject(e)}}return Promise.reject(e)});let n=o},5732:(e,r,a)=>{a.d(r,{i:()=>A,B:()=>j});var s=a(5155),t=a(6874),o=a.n(t),n=a(9018),i=a(285),l=a(6766),c=a(9946);let d=(0,c.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var u=a(9074),h=a(7298),g=a(7580),m=a(4355);let p=(0,c.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),v=(0,c.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var f=a(4416),x=a(1007);let y=(0,c.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var k=a(4783),w=a(2115),b=a(9434);function j(e){let{isOpen:r,setIsOpen:a}=e,{logout:t}=(0,n.n)(),[c,k]=(0,w.useState)(!1);(0,w.useEffect)(()=>{let e=()=>{k(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let j=[{name:"Nusa Discovery",href:"/nusa-discovery",icon:d},{name:"Events",href:"/events",icon:u.A},{name:"Nusa Journey",href:"/nusa-journey",icon:h.A},{name:"Community Hub",href:"/community-hub",icon:g.A},{name:"Nusa Cam",href:"/nusa-cam",icon:m.A}],A=()=>{c&&a(!1)};return(0,s.jsxs)(s.Fragment,{children:[c&&r&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>a(!1)}),(0,s.jsxs)("aside",{className:(0,b.cn)("fixed top-0 left-0 z-50 h-full bg-white border-r border-nusa-gold/20 transition-all duration-300 ease-in-out flex flex-col","md:relative md:translate-x-0",r?"translate-x-0":"-translate-x-full",r?"w-64":"md:w-16"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-nusa-gold/20",children:[(0,s.jsx)(o(),{href:"/nusa-discovery",className:(0,b.cn)("flex items-center space-x-3 transition-opacity duration-200",r||c?"opacity-100":"opacity-0"),onClick:A,children:(0,s.jsx)("div",{className:"h-8 w-auto max-w-[120px] flex items-center",children:(0,s.jsx)(l.default,{src:"/nusakala.svg",alt:"NusaKala Logo",width:100,height:32,className:"object-contain"})})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"hidden md:flex h-8 w-8 p-0 hover:bg-nusa-gold/10",onClick:()=>a(!r),children:r?(0,s.jsx)(p,{className:"h-4 w-4 text-nusa-gold"}):(0,s.jsx)(v,{className:"h-4 w-4 text-nusa-gold"})}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"md:hidden h-8 w-8 p-0 hover:bg-nusa-gold/10",onClick:()=>a(!1),children:(0,s.jsx)(f.A,{className:"h-4 w-4 text-nusa-gold"})})]})]}),(0,s.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:j.map(e=>{let a=e.icon;return(0,s.jsxs)(o(),{href:e.href,onClick:A,className:(0,b.cn)("flex items-center space-x-3 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-200","text-nusa-dark-brown hover:bg-nusa-gold/10 hover:text-nusa-gold","group relative"),children:[(0,s.jsx)(a,{className:"h-5 w-5 flex-shrink-0"}),(r||c)&&(0,s.jsx)("span",{className:"truncate",children:e.name}),!r&&!c&&(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-nusa-dark-brown text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:e.name})]},e.name)})}),(0,s.jsxs)("div",{className:"p-4 border-t border-nusa-gold/20 space-y-4",children:[(0,s.jsxs)(o(),{href:"/profile",className:"flex items-center space-x-3 rounded-lg px-3 py-2 text-sm font-medium text-nusa-dark-brown hover:bg-nusa-gold/10 hover:text-nusa-gold transition-all duration-200",onClick:A,children:[(0,s.jsx)(x.A,{className:"h-5 w-5 flex-shrink-0"}),(r||c)&&(0,s.jsx)("span",{className:"truncate",children:"Profile"})]}),(0,s.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:t,className:"w-full justify-start px-3 py-2 text-sm text-nusa-brown hover:text-nusa-gold hover:bg-nusa-gold/10 transition-all duration-200",children:[(0,s.jsx)(y,{className:"h-5 w-5 mr-3"}),(r||c)&&(0,s.jsx)("span",{children:"Logout"})]})]})]})]})}function A(e){let{onToggleSidebar:r}=e;return(0,s.jsx)("header",{className:"md:hidden sticky top-0 z-30 w-full border-b bg-white/95 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex h-14 items-center justify-between px-4",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:r,children:(0,s.jsx)(k.A,{className:"h-5 w-5"})}),(0,s.jsx)(o(),{href:"/nusa-discovery",className:"flex items-center space-x-2",children:(0,s.jsx)("div",{className:"h-6 w-auto flex items-center",children:(0,s.jsx)(l.default,{src:"/nusakala.svg",alt:"NusaKala Logo",width:90,height:24,className:"object-contain"})})}),(0,s.jsx)("div",{className:"w-8"})]})})}},7298:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(9946).A)("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]])},9018:(e,r,a)=>{a.d(r,{n:()=>n});var s=a(5453),t=a(6786),o=a(4917);let n=(0,s.v)()((0,t.Zr)((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null,login:async(r,a)=>{e({isLoading:!0,error:null});try{let s=await o.y.login({email:r,password:a}),t={user:s.user,isAuthenticated:!0,isLoading:!1,error:null,accessToken:s.session.accessToken};e(t),localStorage.setItem("accessToken",s.session.accessToken),localStorage.setItem("refreshToken",s.session.refreshToken)}catch(r){throw e({isLoading:!1,error:r instanceof Error?r.message:"Login failed"}),r}},register:async r=>{e({isLoading:!0,error:null});try{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null})}catch(r){throw console.error("Auth store: Registration error:",r),e({isLoading:!1,error:r instanceof Error?r.message:"Registration failed"}),r}},logout:async()=>{e({isLoading:!0});try{await o.y.logout()}catch(e){}finally{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},refreshUser:async()=>{if(r().isAuthenticated)try{let r={user:(await o.y.getCurrentUser()).user,isAuthenticated:!0,error:null};e(r)}catch(r){e({user:null,isAuthenticated:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},clearError:()=>{e({error:null})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,accessToken:e.accessToken})}))},9434:(e,r,a)=>{a.d(r,{cn:()=>o});var s=a(2596),t=a(9688);function o(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}}}]);