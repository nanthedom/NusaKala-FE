"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{285:(e,r,t)=>{t.d(r,{$:()=>c});var a=t(5155);t(2115);var o=t(9708),s=t(2085),n=t(9434);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:r,variant:t,size:s,asChild:c=!1,...d}=e,l=c?o.DX:"button";return(0,a.jsx)(l,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:s,className:r})),...d})}},646:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1154:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1284:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(9946).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},4416:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4917:(e,r,t)=>{t.d(r,{y:()=>d});var a=t(5077),o=t(3464);let s="https://nusakala-be-production.up.railway.app/api",n=o.A.create({baseURL:s,headers:{"Content-Type":"application/json"}}),i=o.A.create({baseURL:s,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let r=localStorage.getItem("refreshToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e));class c{async register(e){try{return(await n.post("/auth/register",e)).data}catch(e){if(console.error("Registration error details:",e),o.A.isAxiosError(e)){var r,t,a,s;if(console.error("Response data:",null==(r=e.response)?void 0:r.data),console.error("Response status:",null==(t=e.response)?void 0:t.status),console.error("Response headers:",null==(a=e.response)?void 0:a.headers),null==(s=e.response)?void 0:s.data)throw Error(e.response.data.error||e.response.data.message||"Registration failed")}throw Error("Network error occurred")}}async login(e){try{return(await n.post("/auth/login",e)).data}catch(e){if(o.A.isAxiosError(e)){var r;if(null==(r=e.response)?void 0:r.data)throw Error(e.response.data.error||"Login failed")}throw Error("Network error occurred")}}async logout(){try{return(await a.A.post("/auth/logout")).data}catch(r){if(o.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Logout failed")}throw Error("Network error occurred")}}async refreshToken(){try{return(await i.post("/auth/refresh")).data}catch(r){if(o.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Token refresh failed")}throw Error("Network error occurred")}}async getCurrentUser(){try{return(await a.A.get("/auth/me")).data}catch(r){if(o.A.isAxiosError(r)){var e;if(null==(e=r.response)?void 0:e.data)throw Error(r.response.data.error||"Failed to get user info")}throw Error("Network error occurred")}}}let d=new c},5077:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(3464),o=t(4917);let s=a.A.create({baseURL:"https://nusakala-be-production.up.railway.app/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});s.interceptors.request.use(e=>{{let r=localStorage.getItem("accessToken");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var r;let t=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!t._retry){t._retry=!0;try{let e=await o.y.refreshToken();return localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken),s(t)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login",Promise.reject(e)}}return Promise.reject(e)});let n=s},5339:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6126:(e,r,t)=>{t.d(r,{E:()=>c});var a=t(5155);t(2115);var o=t(9708),s=t(2085),n=t(9434);let i=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,asChild:s=!1,...c}=e,d=s?o.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:t}),r),...c})}},6695:(e,r,t)=>{t.d(r,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>s,aR:()=>n});var a=t(5155);t(2115);var o=t(9434);function s(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function n(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function i(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",r),...t})}function c(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,o.cn)("text-muted-foreground text-sm",r),...t})}function d(e){let{className:r,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",r),...t})}},9018:(e,r,t)=>{t.d(r,{n:()=>n});var a=t(5453),o=t(6786),s=t(4917);let n=(0,a.v)()((0,o.Zr)((e,r)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null,login:async(r,t)=>{e({isLoading:!0,error:null});try{let a=await s.y.login({email:r,password:t}),o={user:a.user,isAuthenticated:!0,isLoading:!1,error:null,accessToken:a.session.accessToken};e(o),localStorage.setItem("accessToken",a.session.accessToken),localStorage.setItem("refreshToken",a.session.refreshToken)}catch(r){throw e({isLoading:!1,error:r instanceof Error?r.message:"Login failed"}),r}},register:async r=>{e({isLoading:!0,error:null});try{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null})}catch(r){throw console.error("Auth store: Registration error:",r),e({isLoading:!1,error:r instanceof Error?r.message:"Registration failed"}),r}},logout:async()=>{e({isLoading:!0});try{await s.y.logout()}catch(e){}finally{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},refreshUser:async()=>{if(r().isAuthenticated)try{let r={user:(await s.y.getCurrentUser()).user,isAuthenticated:!0,error:null};e(r)}catch(r){e({user:null,isAuthenticated:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},clearError:()=>{e({error:null})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,accessToken:e.accessToken})}))},9434:(e,r,t)=>{t.d(r,{cn:()=>s});var a=t(2596),o=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}}}]);