(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{285:(e,a,t)=>{"use strict";t.d(a,{$:()=>l});var r=t(5155);t(2115);var s=t(9708),n=t(2085),i=t(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:a,variant:t,size:n,asChild:l=!1,...c}=e,d=l?s.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:n,className:a})),...c})}},1682:(e,a,t)=>{"use strict";t.d(a,{L:()=>n});var r=t(5077),s=t(2115);function n(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(0),d=async()=>{try{n(!0),o(null);let e=await r.A.get("/events");e.data.success?(a(e.data.data.events),c(e.data.data.total)):o("Failed to fetch events")}catch(e){console.error("Error fetching events:",e),o("Failed to load events")}finally{n(!1)}};return(0,s.useEffect)(()=>{d()},[]),{events:e,loading:t,error:i,total:l,refetch:()=>{d()}}}},4917:(e,a,t)=>{"use strict";t.d(a,{y:()=>c});var r=t(5077),s=t(3464);let n="https://nusakala-be-production.up.railway.app/api",i=s.A.create({baseURL:n,headers:{"Content-Type":"application/json"}}),o=s.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{{let a=localStorage.getItem("refreshToken");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e));class l{async register(e){try{return(await i.post("/auth/register",e)).data}catch(e){if(console.error("Registration error details:",e),s.A.isAxiosError(e)){var a,t,r,n;if(console.error("Response data:",null==(a=e.response)?void 0:a.data),console.error("Response status:",null==(t=e.response)?void 0:t.status),console.error("Response headers:",null==(r=e.response)?void 0:r.headers),null==(n=e.response)?void 0:n.data)throw Error(e.response.data.error||e.response.data.message||"Registration failed")}throw Error("Network error occurred")}}async login(e){try{return(await i.post("/auth/login",e)).data}catch(e){if(s.A.isAxiosError(e)){var a;if(null==(a=e.response)?void 0:a.data)throw Error(e.response.data.error||"Login failed")}throw Error("Network error occurred")}}async logout(){try{return(await r.A.post("/auth/logout")).data}catch(a){if(s.A.isAxiosError(a)){var e;if(null==(e=a.response)?void 0:e.data)throw Error(a.response.data.error||"Logout failed")}throw Error("Network error occurred")}}async refreshToken(){try{return(await o.post("/auth/refresh")).data}catch(a){if(s.A.isAxiosError(a)){var e;if(null==(e=a.response)?void 0:e.data)throw Error(a.response.data.error||"Token refresh failed")}throw Error("Network error occurred")}}async getCurrentUser(){try{return(await r.A.get("/auth/me")).data}catch(a){if(s.A.isAxiosError(a)){var e;if(null==(e=a.response)?void 0:e.data)throw Error(a.response.data.error||"Failed to get user info")}throw Error("Network error occurred")}}}let c=new l},5077:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(3464),s=t(4917);let n=r.A.create({baseURL:"https://nusakala-be-production.up.railway.app/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}});n.interceptors.request.use(e=>{{let a=localStorage.getItem("accessToken");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var a;let t=e.config;if((null==(a=e.response)?void 0:a.status)===401&&!t._retry){t._retry=!0;try{let e=await s.y.refreshToken();return localStorage.setItem("accessToken",e.session.accessToken),localStorage.setItem("refreshToken",e.session.refreshToken),n(t)}catch(e){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/auth/login",Promise.reject(e)}}return Promise.reject(e)});let i=n},5473:(e,a,t)=>{Promise.resolve().then(t.bind(t,6581))},6126:(e,a,t)=>{"use strict";t.d(a,{E:()=>l});var r=t(5155);t(2115);var s=t(9708),n=t(2085),i=t(9434);let o=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:t,asChild:n=!1,...l}=e,c=n?s.DX:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(o({variant:t}),a),...l})}},6581:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var r=t(5155),s=t(6681),n=t(2115),i=t(6695),o=t(285),l=t(9376),c=t(5028),d=t(6126),u=t(7951),g=t(5595),m=t(9037),h=t(3904),x=t(8186),p=t(5607),f=t(8564),b=t(3109);function k(){return new Date().toDateString()}function v(e){let a=k(),t="trivia_status_".concat(e,"_").concat(a),r=localStorage.getItem(t);return r?JSON.parse(r):null}function y(e,a,t,r){let s=k(),n="trivia_status_".concat(e,"_").concat(s);localStorage.setItem(n,JSON.stringify({userId:e,date:s,hasSeenToday:!0,hasAnsweredToday:!0,isCorrect:t,triviaId:a,points:t?r:0})),function(e,a,t){let r=w(e),s=k(),n=new Date;n.setDate(n.getDate()-1);let i=n.toDateString();r.totalAnswers+=1,a?(r.correctAnswers+=1,r.totalPoints+=t,r.lastActiveDate===i?r.currentStreak+=1:r.lastActiveDate===s||(r.currentStreak=1),r.currentStreak>r.longestStreak&&(r.longestStreak=r.currentStreak)):r.currentStreak=0,r.lastActiveDate=s;let o="user_streak_".concat(e);localStorage.setItem(o,JSON.stringify(r))}(e,t,r)}function w(e){let a="user_streak_".concat(e),t=localStorage.getItem(a);if(t)return JSON.parse(t);let r={userId:e,username:"User",currentStreak:0,longestStreak:0,totalPoints:0,correctAnswers:0,totalAnswers:0,lastActiveDate:k()};return localStorage.setItem(a,JSON.stringify(r)),r}function j(){let e=[];for(let a=0;a<localStorage.length;a++){let t=localStorage.key(a);if(null==t?void 0:t.startsWith("user_streak_")){let a=localStorage.getItem(t);a&&e.push(JSON.parse(a))}}let a=[...N,...e];return a.sort((e,a)=>e.currentStreak!==a.currentStreak?a.currentStreak-e.currentStreak:a.totalPoints-e.totalPoints),a.forEach((e,a)=>{e.rank=a+1}),a.slice(0,10)}let N=[{userId:"dummy_1",username:"Budiman Sutrisno",avatar:"\uD83D\uDC68‍\uD83C\uDF93",currentStreak:15,longestStreak:22,totalPoints:285,correctAnswers:19,totalAnswers:20,lastActiveDate:k(),rank:1},{userId:"dummy_2",username:"Sari Kulturawati",avatar:"\uD83D\uDC69‍\uD83C\uDFEB",currentStreak:12,longestStreak:18,totalPoints:240,correctAnswers:16,totalAnswers:18,lastActiveDate:k(),rank:2},{userId:"dummy_3",username:"Arjuna Nusantara",avatar:"\uD83E\uDDD1‍\uD83C\uDFA8",currentStreak:10,longestStreak:15,totalPoints:195,correctAnswers:13,totalAnswers:15,lastActiveDate:k(),rank:3},{userId:"dummy_4",username:"Dewi Saraswati",avatar:"\uD83D\uDC69‍\uD83D\uDCBC",currentStreak:8,longestStreak:12,totalPoints:165,correctAnswers:11,totalAnswers:14,lastActiveDate:k(),rank:4},{userId:"dummy_5",username:"Budi Nusantara",avatar:"\uD83D\uDC68‍\uD83D\uDCBB",currentStreak:7,longestStreak:10,totalPoints:140,correctAnswers:9,totalAnswers:12,lastActiveDate:k(),rank:5},{userId:"dummy_6",username:"Mega Wangi",avatar:"\uD83D\uDC69‍\uD83C\uDFA8",currentStreak:6,longestStreak:8,totalPoints:115,correctAnswers:7,totalAnswers:10,lastActiveDate:k(),rank:6},{userId:"dummy_7",username:"Bayu Samudra",avatar:"\uD83E\uDDD1‍\uD83D\uDE80",currentStreak:5,longestStreak:7,totalPoints:95,correctAnswers:6,totalAnswers:9,lastActiveDate:k(),rank:7},{userId:"dummy_8",username:"Kartika Sari",avatar:"\uD83D\uDC69‍\uD83D\uDD2C",currentStreak:4,longestStreak:6,totalPoints:75,correctAnswers:5,totalAnswers:8,lastActiveDate:k(),rank:8}];function S(e){let{currentUserId:a,onRefresh:t}=e,[s,l]=(0,n.useState)([]),[c,k]=(0,n.useState)(!0);(0,n.useEffect)(()=>{v()},[]);let v=()=>{k(!0);try{let e=j();l(e)}catch(e){console.error("Error loading leaderboard:",e)}finally{k(!1)}},y=e=>{switch(e){case 1:return(0,r.jsx)(u.A,{className:"h-6 w-6 text-yellow-500"});case 2:return(0,r.jsx)(g.A,{className:"h-6 w-6 text-gray-400"});case 3:return(0,r.jsx)(m.A,{className:"h-6 w-6 text-amber-600"});default:return(0,r.jsxs)("span",{className:"text-lg font-bold text-gray-600",children:["#",e]})}};return c?(0,r.jsx)(i.Zp,{className:"border-orange-200",children:(0,r.jsx)(i.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-y-4",children:[(0,r.jsx)(h.A,{className:"h-6 w-6 animate-spin text-orange-500"}),(0,r.jsx)("span",{className:"text-gray-600 ml-2",children:"Memuat leaderboard..."})]})})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(x.A,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-orange-900",children:"Leaderboard Trivia"}),(0,r.jsx)("p",{className:"text-sm text-orange-700",children:"Peringkat berdasarkan streak dan total poin"})]})]}),(0,r.jsxs)(o.$,{onClick:()=>{v(),null==t||t()},variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"Refresh"]})]}),s.length>=3&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:s.slice(0,3).map((e,t)=>{var s;let n=t+1,o=(e=>{switch(e){case 1:return{border:"border-yellow-300",bg:"bg-gradient-to-r from-yellow-50 to-amber-50",glow:"shadow-yellow-200"};case 2:return{border:"border-gray-300",bg:"bg-gradient-to-r from-gray-50 to-slate-50",glow:"shadow-gray-200"};case 3:return{border:"border-amber-300",bg:"bg-gradient-to-r from-amber-50 to-orange-50",glow:"shadow-amber-200"};default:return{border:"border-orange-200",bg:"bg-white",glow:"shadow-md"}}})(n);return(0,r.jsx)(i.Zp,{className:"".concat(o.border," ").concat(o.bg," ").concat(o.glow," shadow-lg hover:shadow-xl transition-all duration-300"),children:(0,r.jsxs)(i.Wu,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"mb-3",children:y(n)}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("div",{className:"text-2xl mb-1",children:e.avatar||"\uD83D\uDC64"}),(0,r.jsxs)("h3",{className:"font-bold text-sm ".concat(a===e.userId?"text-orange-600":"text-gray-800"),children:[e.username,a===e.userId&&(0,r.jsx)("span",{className:"text-xs ml-1",children:"(Anda)"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-orange-500"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:e.currentStreak})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3 text-yellow-500"}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[e.totalPoints," poin"]})]}),(0,r.jsx)(d.E,{className:"".concat((s=e.currentStreak)>=10?"bg-red-500":s>=7?"bg-orange-500":s>=5?"bg-yellow-500":s>=3?"bg-green-500":s>=1?"bg-blue-500":"bg-gray-400"," text-white text-xs"),children:0===e.currentStreak?"Tidak Ada Streak":1===e.currentStreak?"1 Hari":"".concat(e.currentStreak," Hari Berturut")})]})]})},e.userId)})}),(0,r.jsx)(i.Zp,{className:"border-orange-200",children:(0,r.jsx)(i.Wu,{className:"p-0",children:(0,r.jsx)("div",{className:"space-y-0",children:s.map((e,t)=>{let s=t+1,n=a===e.userId,i=e.totalAnswers>0?Math.round(e.correctAnswers/e.totalAnswers*100):0;return(0,r.jsx)("div",{className:"p-4 border-b border-gray-100 last:border-b-0 hover:bg-orange-50 transition-colors ".concat(n?"bg-orange-50 border-orange-200":""),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-8 h-8 flex items-center justify-center",children:s<=3?y(s):(0,r.jsxs)("span",{className:"text-sm font-bold text-gray-600",children:["#",s]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:e.avatar||"\uD83D\uDC64"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold ".concat(n?"text-orange-600":"text-gray-800"),children:[e.username,n&&(0,r.jsx)("span",{className:"text-xs ml-2 text-orange-500",children:"(Anda)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Akurasi: ",i,"%"]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[e.correctAnswers,"/",e.totalAnswers," benar"]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-orange-500"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:e.currentStreak})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Streak"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 text-yellow-500"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:e.totalPoints})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Poin"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 text-green-500"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:e.longestStreak})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Terbaik"})]})]})]})},e.userId)})})})}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-600",children:(0,r.jsxs)("p",{children:["Showing top ",s.length," players •",(0,r.jsx)("span",{className:"ml-1",children:"Updated daily at midnight"})]})})]})}var A=t(237),T=t(4416),_=t(9434);function B(e){let{...a}=e;return(0,r.jsx)(A.bL,{"data-slot":"dialog",...a})}function D(e){let{...a}=e;return(0,r.jsx)(A.ZL,{"data-slot":"dialog-portal",...a})}function I(e){let{className:a,...t}=e;return(0,r.jsx)(A.hJ,{"data-slot":"dialog-overlay",className:(0,_.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function E(e){let{className:a,children:t,showCloseButton:s=!0,...n}=e;return(0,r.jsxs)(D,{"data-slot":"dialog-portal",children:[(0,r.jsx)(I,{}),(0,r.jsxs)(A.UC,{"data-slot":"dialog-content",className:(0,_.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...n,children:[t,s&&(0,r.jsxs)(A.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(T.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}var C=t(4186),P=t(6785),J=t(646),L=t(4861);function M(e){let{question:a,userId:t,username:s,onAnswer:c,onClose:u,open:g}=e,[m,h]=(0,n.useState)(null),[b,k]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[N,S]=(0,n.useState)(60),[A,T]=(0,n.useState)(w(t));(0,n.useEffect)(()=>{if(!g||b)return;let e=setInterval(()=>{S(e=>e<=1?(_(),0):e-1)},1e3);return()=>clearInterval(e)},[g,b]);let _=()=>{null!==m?D():(j(!1),k(!0),y(t,a.id,!1,0),c(!1,0))},D=()=>{if(null===m)return;let e=m===a.correctAnswer,r=e?a.points:0;j(e),k(!0),y(t,a.id,e,r),T(w(t)),c(e,r)};return(0,r.jsx)(B,{open:g,onOpenChange:u,children:(0,r.jsx)(E,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:b?(0,r.jsxs)("div",{className:"space-y-6 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:v?(0,r.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(J.A,{className:"h-12 w-12 text-green-500"})}):(0,r.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(L.A,{className:"h-12 w-12 text-red-500"})})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold ".concat(v?"text-green-600":"text-red-600"),children:v?"\uD83C\uDF89 Benar!":"\uD83D\uDE14 Kurang Tepat"}),(0,r.jsx)("p",{className:"text-gray-600",children:v?"Selamat ".concat(s,"! Anda mendapat ").concat(a.points," poin."):"Jawaban yang benar adalah: ".concat(a.options[a.correctAnswer])})]}),v&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-orange-500"}),(0,r.jsxs)("span",{className:"font-medium",children:["Streak: ",A.currentStreak]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-yellow-500"}),(0,r.jsxs)("span",{className:"font-medium",children:["Total Poin: ",A.totalPoints]})]})]}),(0,r.jsx)(i.Zp,{className:"border-blue-200 bg-blue-50",children:(0,r.jsxs)(i.Wu,{className:"p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 Penjelasan:"}),(0,r.jsx)("p",{className:"text-blue-800 text-sm leading-relaxed text-left",children:a.explanation})]})}),(0,r.jsx)(o.$,{onClick:u,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white py-3 font-medium",children:"Selesai"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-8 w-8 text-orange-500"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-orange-900",children:"✨ Daily Cultural Trivia"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(d.E,{className:"".concat((e=>{switch(e){case"easy":return"bg-green-500";case"medium":return"bg-yellow-500";case"hard":return"bg-red-500";default:return"bg-gray-500"}})(a.difficulty)," text-white"),children:(e=>{switch(e){case"easy":return"Mudah";case"medium":return"Sedang";case"hard":return"Sulit";default:return e}})(a.difficulty)}),(0,r.jsx)(d.E,{variant:"outline",className:"border-orange-300 text-orange-700",children:a.category}),(0,r.jsxs)(d.E,{variant:"outline",className:"border-green-300 text-green-700",children:[(0,r.jsx)(f.A,{className:"h-3 w-3 mr-1"}),a.points," poin"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(C.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("span",{className:"font-mono ".concat(N<=10?"text-red-500 font-bold":"text-gray-600"),children:[Math.floor(N/60),":",(N%60).toString().padStart(2,"0")]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 text-orange-500"}),(0,r.jsxs)("span",{children:["Streak: ",A.currentStreak]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-yellow-500"}),(0,r.jsxs)("span",{children:["Poin: ",A.totalPoints]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(P.A,{className:"h-4 w-4 text-blue-500"}),(0,r.jsxs)("span",{children:["Akurasi: ",A.totalAnswers>0?Math.round(A.correctAnswers/A.totalAnswers*100):0,"%"]})]})]})]}),(0,r.jsx)(i.Zp,{className:"border-orange-200",children:(0,r.jsx)(i.Wu,{className:"p-6",children:(0,r.jsx)("p",{className:"text-lg font-medium text-orange-900 leading-relaxed text-center",children:a.question})})}),(0,r.jsx)("div",{className:"space-y-3",children:a.options.map((e,a)=>(0,r.jsx)("button",{onClick:()=>h(a),className:"w-full p-4 text-left rounded-xl border-2 transition-all duration-200 hover:shadow-md ".concat(m===a?"border-orange-400 bg-orange-50 shadow-md":"border-gray-200 hover:border-orange-200"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(m===a?"border-orange-400 bg-orange-400":"border-gray-300"),children:m===a&&(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e})]})},a))}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(o.$,{onClick:D,disabled:null===m,className:"flex-1 bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white py-3 font-medium",children:"Jawab Sekarang"}),(0,r.jsx)(o.$,{variant:"outline",onClick:()=>{y(t,a.id,!1,0),c(!1,0),u()},className:"border-gray-300 text-gray-600 hover:bg-gray-50",children:"Lewati"})]})]})})})}var R=t(9074);function U(e){let{event:a}=e;return(0,r.jsxs)(i.Zp,{className:"border-nusa-gold/20 hover:shadow-md transition-shadow",children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(R.A,{className:"w-4 h-4 text-nusa-gold"}),a.title]})}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("p",{className:"text-sm text-nusa-brown mb-2",children:a.date}),(0,r.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:a.description})]})]})}let q=[{id:"trivia_001",question:"Instrumen musik tradisional Angklung berasal dari provinsi mana?",options:["Jawa Timur","Jawa Barat","Jawa Tengah","Bali"],correctAnswer:1,explanation:"Angklung adalah instrumen musik tradisional yang berasal dari Jawa Barat, terbuat dari bambu dan telah diakui UNESCO sebagai Masterpiece of Oral and Intangible Heritage of Humanity.",difficulty:"easy",category:"Traditional Music",points:10},{id:"trivia_002",question:"Tari Saman yang terkenal dengan gerakan cepat dan dinamis berasal dari daerah mana?",options:["Sumatera Utara","Aceh","Sumatera Barat","Riau"],correctAnswer:1,explanation:'Tari Saman berasal dari Aceh dan dikenal sebagai "Tari Seribu Tangan" karena gerakan tangan yang sangat cepat dan kompak. Tarian ini juga telah diakui UNESCO.',difficulty:"medium",category:"Traditional Dance",points:15},{id:"trivia_003",question:"Batik cap dan batik tulis adalah dua teknik pembuatan batik. Manakah yang lebih tua?",options:["Batik cap","Batik tulis","Sama-sama tua","Tidak ada yang benar"],correctAnswer:1,explanation:"Batik tulis adalah teknik yang lebih tua, sudah ada sejak abad ke-12. Batik cap baru dikembangkan pada abad ke-19 untuk mempercepat proses produksi.",difficulty:"medium",category:"Traditional Crafts",points:15},{id:"trivia_004",question:"Rumah adat Tongkonan dengan atap melengkung khas berasal dari daerah mana?",options:["Sulawesi Utara","Sulawesi Tengah","Sulawesi Selatan","Sulawesi Tenggara"],correctAnswer:2,explanation:"Tongkonan adalah rumah adat suku Toraja di Sulawesi Selatan. Bentuk atapnya yang melengkung menyerupai perahu terbalik memiliki makna filosofis yang mendalam.",difficulty:"medium",category:"Traditional Architecture",points:15},{id:"trivia_005",question:"Rendang yang terkenal sebagai makanan terenak di dunia berasal dari daerah mana?",options:["Sumatera Utara","Sumatera Barat","Sumatera Selatan","Jambi"],correctAnswer:1,explanation:"Rendang berasal dari Sumatera Barat, khususnya dari suku Minangkabau. Makanan ini pernah dinobatkan sebagai makanan terenak di dunia oleh CNN International.",difficulty:"easy",category:"Traditional Cuisine",points:10},{id:"trivia_006",question:"Wayang kulit tradisional menggunakan bahasa apa sebagai bahasa utama pertunjukan?",options:["Bahasa Indonesia","Bahasa Jawa Kuno","Bahasa Sunda","Bahasa Bali"],correctAnswer:1,explanation:"Wayang kulit tradisional umumnya menggunakan Bahasa Jawa Kuno (Kawi) dan Bahasa Jawa modern, dengan dalang sebagai narator yang menguasai berbagai tingkatan bahasa Jawa.",difficulty:"hard",category:"Traditional Performance",points:20},{id:"trivia_007",question:'Kain tradisional "Ulos" yang sering digunakan dalam upacara adat berasal dari suku mana?',options:["Suku Dayak","Suku Batak","Suku Sasak","Suku Bugis"],correctAnswer:1,explanation:"Ulos adalah kain tradisional suku Batak di Sumatera Utara. Kain ini memiliki makna spiritual dan sering digunakan dalam berbagai upacara adat penting.",difficulty:"medium",category:"Traditional Clothing",points:15},{id:"trivia_008",question:"Candi Borobudur dibangun pada masa kerajaan mana?",options:["Majapahit","Sailendra","Mataram Kuno","Sriwijaya"],correctAnswer:1,explanation:"Candi Borobudur dibangun pada abad ke-8 hingga ke-9 Masehi pada masa Dinasti Sailendra. Candi ini merupakan candi Buddha terbesar di dunia.",difficulty:"hard",category:"Historical Heritage",points:20},{id:"trivia_009",question:'Tari Kecak yang menampilkan puluhan penari pria duduk melingkar sambil mengucapkan "cak" berasal dari daerah mana?',options:["Jawa Tengah","Yogyakarta","Bali","Lombok"],correctAnswer:2,explanation:'Tari Kecak berasal dari Bali dan dikembangkan pada tahun 1930-an. Tarian ini menggambarkan kisah Ramayana dengan paduan suara "cak" yang hypnotic.',difficulty:"easy",category:"Traditional Dance",points:10},{id:"trivia_010",question:"Gamelan Degung adalah jenis gamelan khas dari daerah mana?",options:["Jawa Tengah","Jawa Timur","Jawa Barat","Banten"],correctAnswer:2,explanation:"Gamelan Degung adalah gamelan khas Sunda dari Jawa Barat. Musik ini memiliki karakter yang lembut dan melankolis, berbeda dengan gamelan Jawa pada umumnya.",difficulty:"medium",category:"Traditional Music",points:15},{id:"trivia_011",question:'Upacara "Nyepi" yang merupakan hari raya keheningan berasal dari agama dan daerah mana?',options:["Hindu, Jawa","Buddha, Lombok","Hindu, Bali","Islam, Aceh"],correctAnswer:2,explanation:"Nyepi adalah hari raya Hindu yang dirayakan di Bali sebagai tahun baru Saka. Selama 24 jam, seluruh aktivitas dihentikan untuk merefleksi diri.",difficulty:"easy",category:"Religious Ceremony",points:10},{id:"trivia_012",question:"Keris yang merupakan senjata tradisional Indonesia memiliki berapa lekukan pada bilahnya yang dianggap paling sakral?",options:["5 lekukan","7 lekukan","9 lekukan","13 lekukan"],correctAnswer:2,explanation:"Keris dengan 9 lekukan (luk) dianggap paling sakral dalam tradisi Jawa. Angka 9 melambangkan kesempurnaan dan kedewasaan spiritual.",difficulty:"hard",category:"Traditional Weaponry",points:20},{id:"trivia_013",question:'Filosofi "Tri Hita Karana" yang mengajarkan keseimbangan hidup berasal dari budaya mana?',options:["Jawa","Bali","Sunda","Minang"],correctAnswer:1,explanation:"Tri Hita Karana adalah filosofi Hindu Bali yang mengajarkan keseimbangan hubungan antara manusia dengan Tuhan, sesama manusia, dan alam lingkungan.",difficulty:"hard",category:"Philosophy & Wisdom",points:20},{id:"trivia_014",question:'Makanan "Papeda" yang terbuat dari sagu merupakan makanan pokok dari daerah mana?',options:["Maluku","Papua","Sulawesi","A dan B benar"],correctAnswer:3,explanation:"Papeda adalah makanan pokok yang populer di Maluku dan Papua. Makanan ini terbuat dari tepung sagu dan biasanya dimakan dengan kuah ikan atau sayuran.",difficulty:"medium",category:"Traditional Cuisine",points:15},{id:"trivia_015",question:'Tarian "Tor-tor" yang dilakukan dalam upacara adat Batak memiliki makna apa?',options:["Tarian perang","Tarian penyambutan","Tarian spiritual","Semua benar"],correctAnswer:3,explanation:"Tor-tor dalam budaya Batak memiliki berbagai makna tergantung konteksnya - bisa sebagai tarian spiritual, penyambutan tamu, atau bahkan ritual perang.",difficulty:"hard",category:"Traditional Dance",points:20}];var z=t(1682);let K=(0,c.default)(()=>Promise.all([t.e(168),t.e(874),t.e(575),t.e(348)]).then(t.bind(t,4348)),{loadableGenerated:{webpack:()=>[4348]},ssr:!1});function W(){let{user:e}=(0,s.A)(),{events:a,loading:t}=(0,z.L)(),[c,d]=(0,n.useState)(!1),[u]=(0,n.useState)(function(){let e=new Date().toDateString().split("").reduce((e,a)=>e+a.charCodeAt(0),0)%q.length;return q[e]}()),[g,m]=(0,n.useState)(null),[h]=(0,n.useState)(null),[x,p]=(0,n.useState)([]);(0,n.useEffect)(()=>{e&&f()},[e]);let f=async()=>{if(!e)return;let a=v(e.id);if(m(a),h(w(e.id)),p(j()),!(null==a?void 0:a.hasSeenToday)){d(!0);var t=e.id;let a=k(),r="trivia_status_".concat(t,"_").concat(a);localStorage.setItem(r,JSON.stringify({userId:t,date:a,hasSeenToday:!0,hasAnsweredToday:!1}))}},b=async()=>{e&&(h(await w(e.id)),p(await j()),m(await v(e.id)))};if(!e)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto"}),(0,r.jsx)("p",{className:"text-orange-700",children:"Loading..."})]})});let y=(()=>{if(!a.length)return[];let e=new Date;return a.filter(a=>new Date(a.start_datetime)>e).sort((e,a)=>new Date(e.start_datetime).getTime()-new Date(a.start_datetime).getTime()).slice(0,6).map(e=>({id:e.id,title:e.name,date:new Date(e.start_datetime).toLocaleDateString("id-ID"),location:e.place_name,description:e.description,image:e.images[0]||"/placeholder-event.jpg"}))})();return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[c&&(0,r.jsx)(M,{question:u,userId:e.id,username:e.email,onAnswer:b,onClose:()=>d(!1),open:c}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-4xl font-extrabold text-orange-900 mb-2",children:["Welcome to Nusa, ",e.email,"! \uD83C\uDDEE\uD83C\uDDE9"]}),(0,r.jsx)("p",{className:"text-lg text-orange-700",children:"Explore Indonesia's rich cultural heritage and test your knowledge"})]}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row gap-4",children:(0,r.jsx)(i.Zp,{className:"border-orange-200",children:(0,r.jsx)(i.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800",children:"Daily Trivia"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:(null==g?void 0:g.hasAnsweredToday)?"Sudah dijawab hari ini ".concat(g.isCorrect?"✅":"❌"):"Belum dijawab hari ini"})]}),(0,r.jsx)(o.$,{onClick:()=>{d(!0)},size:"sm",className:(0,_.cn)("px-3 py-2 text-xs font-medium",(null==g?void 0:g.hasAnsweredToday)?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white"),children:(null==g?void 0:g.hasAnsweredToday)?"Lihat Lagi":"Jawab Sekarang"})]})})})})]})}),(0,r.jsx)("div",{className:"mb-10",children:(0,r.jsx)(K,{})}),(0,r.jsxs)("div",{className:"mb-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-orange-900 mb-2",children:"Upcoming Cultural Events"}),(0,r.jsx)("p",{className:"text-orange-700",children:"Discover amazing cultural events happening across Indonesia"})]}),(0,r.jsx)(o.$,{variant:"outline",className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:"View All Events"})]}),t?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"bg-gray-200 h-48 rounded-lg mb-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"bg-gray-200 h-4 rounded w-3/4"}),(0,r.jsx)("div",{className:"bg-gray-200 h-3 rounded w-1/2"})]})]},e))}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(e=>(0,r.jsx)(U,{event:e},e.id))})]}),(0,r.jsx)("div",{className:"mb-16",children:(0,r.jsx)(S,{currentUserId:e.id,onRefresh:()=>{p(j())}})})]})}},6681:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(9018);function s(){let{user:e,isAuthenticated:a,isLoading:t,error:s,login:n,register:i,logout:o,refreshUser:l,clearError:c}=(0,r.n)();return{user:e,isAuthenticated:a,isLoading:t,error:s,login:async(e,a)=>{try{await n(e,a),setTimeout(()=>{window.location.href="/nusa-discovery"},1e3)}catch(e){throw e}},register:async e=>{try{await i(e),setTimeout(()=>{window.location.href="/auth/login"},1e3)}catch(e){throw console.error("Registration error in useAuth:",e),e}},logout:async()=>{try{await o(),setTimeout(()=>{window.location.href="/"},500)}catch(e){console.error("Logout error:",e),setTimeout(()=>{window.location.href="/"},500)}},refreshUser:l,clearError:c}}},6695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var r=t(5155);t(2115);var s=t(9434);function n(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function i(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function o(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...t})}function l(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...t})}function c(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...t})}},9018:(e,a,t)=>{"use strict";t.d(a,{n:()=>i});var r=t(5453),s=t(6786),n=t(4917);let i=(0,r.v)()((0,s.Zr)((e,a)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null,login:async(a,t)=>{e({isLoading:!0,error:null});try{let r=await n.y.login({email:a,password:t}),s={user:r.user,isAuthenticated:!0,isLoading:!1,error:null,accessToken:r.session.accessToken};e(s),localStorage.setItem("accessToken",r.session.accessToken),localStorage.setItem("refreshToken",r.session.refreshToken)}catch(a){throw e({isLoading:!1,error:a instanceof Error?a.message:"Login failed"}),a}},register:async a=>{e({isLoading:!0,error:null});try{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null})}catch(a){throw console.error("Auth store: Registration error:",a),e({isLoading:!1,error:a instanceof Error?a.message:"Registration failed"}),a}},logout:async()=>{e({isLoading:!0});try{await n.y.logout()}catch(e){}finally{e({user:null,isAuthenticated:!1,isLoading:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},refreshUser:async()=>{if(a().isAuthenticated)try{let a={user:(await n.y.getCurrentUser()).user,isAuthenticated:!0,error:null};e(a)}catch(a){e({user:null,isAuthenticated:!1,error:null,accessToken:null}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},clearError:()=>{e({error:null})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,accessToken:e.accessToken})}))},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>n});var r=t(2596),s=t(9688);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}}},e=>{e.O(0,[455,655,688,786,441,964,358],()=>e(e.s=5473)),_N_E=e.O()}]);